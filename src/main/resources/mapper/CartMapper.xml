<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ucar.training.dao.CartGoodsDao">
    <resultMap id="cartGoodsMap" type="com.ucar.training.entity.CartGoods">
        <id column="id" property="id"/>
        <result column="good_id" property="goodID"/>
        <result column="good_num" property="goodNum"/>
        <collection property="good" ofType="com.ucar.training.entity.Goods">
            <id column="good_id" property="id"/>
            <result column="good_name" property="goodName"/>
            <result column="good_desc" property="goodDesc"/>
            <result column="good_price" property="goodPrice"/>
            <result column="good_inventory" property="goodInventory"/>
        </collection>
    </resultMap>

    <select id="selectAll" resultMap="cartGoodsMap">
        select cart_goods.id, cart_goods.good_id, good_num, good_name,good_desc,good_price,good_inventory
        from cart_goods,t_goods
        where cart_goods.good_id=t_goods.id and username=#{arg0};
    </select>

    <insert id="insertCartGoods">
        insert into cart_goods (good_id, good_num,username) values (#{arg0},#{arg1},#{arg2});
    </insert>

    <select id="selectCartGoods" resultType="INTEGER">
        select good_id from cart_goods where good_id=#{arg0} and username=#{arg1};
    </select>

    <update id="updateCartGoods">
        update cart_goods set good_num=#{arg1} where good_id=#{arg0} and username=#{arg2}
    </update>

    <delete id="delCartGoods">
        delete from cart_goods where good_id=#{arg0} and username=#{arg1};
    </delete>

    <delete id="delAllCartGoods">
        delete from cart_goods where username=#{arg0};
    </delete>
</mapper>